// Globals
var english_strings =
    {
        // Header and Footer
        header_welcome: "welcome",
        header_our_macaroons: "our macaroons",
        header_gifts_parties: "gifts & parties",
        header_contact: "contact",
        footer_follow_us: "Follow us",
        footer_legal: "Copyright © 2014 MBoutique. All rights reserved.",

        // For index.html
        welcome_info_welcome_header: "Welcome to MBoutique!",
        welcome_info_welcome_paragraph: "We're a home-based baking business that specializes in the making of French macarons, a gluten-free pastry item made from ground almonds. Our business began at the West Reading Farmers Market in 2011.  Last year (2013) marked our third and final season of participation at the market.  MBoutique was established to pay homage to the delicate French confectionery, the macaron. Our shop has been recognized as the connoisseurs of this delicious French pastry because of the wonderful variety of flavors from our great master chefs.",
        welcome_info_we_love_header: "We love Macarons!",
        welcome_info_we_love_paragraph1: "Renowned macarons, French delights of the moment can be met in a variety of flavors and colors and are brilliant precisely because of their simplicity - a crispy coating, but delicate in a loose blanket jam, chocolate butter cream is spread inviting.",
        welcome_info_we_love_paragraph2: "Macarons combines perfectly with champagne or white wine, tea or hot chocolate, fresh juices and natural fruit flavored coffee and guarantee that these little delights soon become friend that you can not break.",
        welcome_info_try_sample_header: "Find the flavor that you like.  Try a sample every day!",
        flavor_schedule: [
            // Monday
            {
                day: 'Monday',
                time: '15:00 - 16:00',
                flavor1: 'chocolate',
                flavor2: 'coconut'
            },
            // Tuesday
            {
                day: 'Tuesday',
                time: '14:00 - 15:00',
                flavor1: 'violet cassis',
                flavor2: 'green tea'
            },
            // Wednesday
            {
                day: 'Wednesday',
                time: '09:00 - 10:00',
                flavor1: 'passion fruit',
                flavor2: 'vanilla'
            },
            // Thursday
            {
                day: 'Thursday',
                time: '18:00 - 19:00',
                flavor1: 'coffee',
                flavor2: 'pistachio'
            },
            // Friday
            {
                day: 'Friday',
                time: '11:00 - 12:00',
                flavor1: 'raspberry',
                flavor2: 'lemon'
            },
            // Saturday
            {
                day: 'Saturday',
                time: '13:00 - 14:00',
                flavor1: 'rose',
                flavor2: 'tiffany blue'
            },
            // Sunday
            {
                day: 'Sunday',
                time: '10:00 - 11:00',
                flavor1: 'caramel',
                flavor2: 'almond'
            },
        ],

        // For our_macarons.html
        our_macarons_header: "Our macarons are freshly made by hand",
        our_macarons_paragraph: "The vivid hues of our unique macarons reflect the natural flavors and essences that infuse the ganache filling of these delicious almost cookies - each has its own personality, and all of them are made to savour for their delicacy and unique character.",
        classics_header: "Classics",
        classics_flavors: [
            'caribbean chocolate',
            'coconut',
            'colombian coffee',
            'green tea',
            'lemon',
            'madagascar vanilla',
            'passion fruit',
            'rose',
            'raspberry',
            'tiffany blue',
            'sicilian pistachio',
            'sweet wedding almond',
            'violet cassis',
            'salted caramel'
        ],
        recommendations_paragraph: "After purchase we recommend keep macarons in the refrigerator; let them come to room temperature before serving - about 10 minutes. For best degustation, our macarons should be consumed withing 3 days.",

        // For gift_parties.html
        lets_eat_header: "Let's eat macarons!",
        lets_eat_paragraph: "We make it easy to chare la passion du macaron with your friends, family and colleagues. Choose from our array of premium gift options, or we can create a custom solution. Contact us when you need help planning your celebration! ",
        gifts_header: "Gift boxes",
        gifts_paragraph: "Our signature gift boxes make macarons the perfect gift for any occasion.",
        gifts_list: [
            'gift box of 6 macarons in raspberrywhite - $10',
            'gift box of 12 macarons in white, pistachio, or violet - $20',
            'gift box of 24 macarons in violet',
            'gift box of 36 macarons in silver',
            'gift box a la ronde of 60 macarons in violet or silver - $120'
        ],
        party_header: "Party tower",
        party_paragraph: "Our 5-tiered party tower becomes the centerpiece of any special event or private celebration, elegantly presenting your unique selection of sixty macarons.",
        party_list: [
            'tower of 60 macarons - $120'
        ],

        // For contact.html
        visit_us_header: "Visit us!",
        visit_us_paragraphs: [
            'Monday - Friday | 10am - 9pm',
            'Saturday | 10am - 8pm',
            'Sunday | 11am - 7pm',
            'Closed Thanksgiving Day, Christmas Day and Easter Day',
            '1625 Post St',
            'San Francisco, CA 94115',
            '949.800-3111',
            'Send your questions, comments and flavor suggestions or place an order!'
        ],
        contact_form_header: "Contact Form",
        contact_form_labels: [
            'Name',
            'Email',
            'Phone',
            'Subject',
            'Message'
        ],
        contact_form_button: "SEND"
    };

var german_strings =
    {
        // Header and footer
        header_welcome: "Willkommen",
        header_our_macaroons: "Unsere Makronen",
        header_gifts_parties: "Geschenke & Parteien",
        header_contact: "Kontakt",
        footer_follow_us: "Folgen Sie uns",
        footer_legal: "Copyright © 2014 MBoutique. Alle Rechte vorbehalten.",

        // For index.html
        welcome_info_welcome_header: "Willkommen bei MBoutique!",
        welcome_info_welcome_paragraph: "Wir sind ein Haus-gegründetes Backen-Unternehmen, das spezialisiert auf die Herstellung des französischen Macarons, ein glutenfreies Gebäck-Element aus gemahlenen Mandeln hergestellt. 2011 begann unser Geschäft an der West-Lesung-Bauernmarkt.  Letztes Jahr (2013) markiert unsere dritte und letzte Saison der Teilnahme an den Markt.  MBoutique wurde gegründet, um die Hommage an die zarte französische Konditorei, die Macaron. Unser Shop ist wegen der wunderbaren Vielfalt von Aromen aus unserer großen Meisterköchen als die Kenner dieses leckere Gebäck anerkannt.",
        welcome_info_we_love_header: "Wir lieben die Macarons!",
        welcome_info_we_love_paragraph1: "Berühmten Macarons, französische Freuden des Augenblicks können in einer Vielzahl von Geschmacksrichtungen und Farben erfüllt werden und sind gerade wegen ihrer Einfachheit - knusprige Beschichtung, brillant, aber zarte in einem losen Decke Marmelade, Schokolade-Butter-Creme ist verbreitet einladen.",
        welcome_info_we_love_paragraph2: "Macarons kombiniert perfekt mit Champagner oder Weisswein, Tee oder heiße Schokolade, frische Säfte und natürliche Frucht gewürzte Kaffee und Garantie, dass diese kleinen Freuden bald Freund geworden, die Sie nicht brechen kann.",
        welcome_info_try_sample_header: "Finde den Geschmack, den Ihnen gefallen.  Versuchen Sie eine Probe jeden Tag!",
        flavor_schedule: [
            // Monday
            {
                day: 'Montag',
                time: '15.00 - 16.00',
                flavor1: 'Schokolade',
                flavor2: 'Kokosnuss'
            },
            // Tuesday
            {
                day: 'Dienstag',
                time: '14.00 - 15.00',
                flavor1: 'Violet Cass',
                flavor2: 'Grüner Tee'
            },
            // Wednesday
            {
                day: 'Mittwoch',
                time: '09.00 - 10.00',
                flavor1: 'Passionsfrucht',
                flavor2: 'Vanille'
            },
            // Thursday
            {
                day: 'Donnerstag',
                time: '18.00 - 19.00',
                flavor1: 'Kaffee',
                flavor2: 'Pistazie'
            },
            // Friday
            {
                day: 'Freitag',
                time: '11.00 - 12.00',
                flavor1: 'Himbeere',
                flavor2: 'Zitrone'
            },
            // Saturday
            {
                day: 'Samstag',
                time: '13.00 - 14.00',
                flavor1: 'Rose',
                flavor2: 'Tiffany blau'
            },
            // Sunday
            {
                day: 'Sonntag',
                time: '10.00 - 11.00',
                flavor1: 'Karamell',
                flavor2: 'Mandel'
            },
        ],

        // For our_macarons.html
        our_macarons_header: "Unsere Macarons sind frisch von hand gefertigt.",
        our_macarons_paragraph: "Die leuchtenden Farben von unserem einzigartigen Macarons zu reflektieren, die natürlichen Aromen und Essenzen, die Infusion die Ganache Füllen von diesen köstlichen fast Cookies - jeder hat seine eigene Persönlichkeit und sie alle werden gebildet, um für ihre Zartheit und einzigartigen Charakter zu genießen.",
        classics_header: "Klassiker",
        classics_flavors: [
            'Karibische Schokolade',
            'Kokosnuss',
            'Kolumbianischen Kaffee',
            'Grüner Tee',
            'Zitrone',
            'Madagaskar-Vanille',
            'Passionsfrucht',
            'Rose',
            'Himbeere',
            'Tiffany Blau',
            'Sizilianische Pistazie',
            'süße Hochzeit Mandel',
            'Violet Schwarzer Johannisbeere',
            'gesalzenem Karamell'
        ],
        recommendations_paragraph: "Nach dem Kauf empfehlen wir Macarons halten im Kühlschrank; lassen Sie sie auf Raumtemperatur vor dem servieren - ca. 10 Minuten kommen. Für beste Degustation sollte unsere Macarons verbrauchten innerhalb 3 Tage.",

        // For gift_parties.html
        lets_eat_header: "Lasst uns essen Macarons!",
        lets_eat_paragraph: "Wir machen es einfach, kostenlos la Passion du Macaron mit Ihren Freunden, Familie und Kollegen. Wählen Sie aus unsere Palette von Premium-Geschenk-Optionen, oder wir können eine benutzerdefinierte Lösung erstellen. Kontaktieren Sie uns, wenn Sie planen Ihre Feier Hilfe benötigen! ",
        gifts_header: "Geschenkboxen",
        gifts_paragraph: "Unsere Signatur-Geschenkboxen machen Macarons das perfekte Geschenk für jeden Anlass.",
        gifts_list: [
            'Geschenk-Box von 6 Macarons in Raspberrywhite - $10',
            'Geschenk-Box von 12 Macarons in weiß, Pistazie oder violett - $20',
            'Geschenk-Box von 24 Macarons in violett',
            'Geschenk-Box von 36 Macarons in Silber',
            'Geschenk-Box a la Ronde 60 Macarons in violett oder Silber - $120'
        ],
        party_header: "Party-Turm",
        party_paragraph: "Unsere 5-Tier Partei-Turm wird das Herzstück eines besonderen Ereignisses oder Privatfeier, elegant präsentieren Ihre einzigartige Auswahl an sechzig Macarons.",
        party_list: [
            'Turm der 60 Macarons - $120'
        ],

        // For contact.html
        visit_us_header: "Besuchen Sie uns!",
        visit_us_paragraphs: [
            'Montag - Freitag | 10:00-21:00',
            'Samstag | 10:00-20:00',
            'Sonntag | 11:00-19:00',
            'Geschlossene Erntedankfest, Weihnachten oder Ostern Tage',
            '1625 Post St',
            'San Francisco, CA 94115',
            '949.800-3111',
            'Senden Sie Ihre Fragen, Kommentare und Anregungen Aroma oder geben Sie eine Bestellung auf!'
        ],
        contact_form_header: "Kontakt-Formular",
        contact_form_labels: [
            'Name',
            'E-Mail',
            'Telefon',
            'Betreff',
            'Nachricht'
        ],
        contact_form_button: "SENDEN"
    };

/**
 * Dictionary (key/value array) that holds the language
 *  objects.
 */
var language =
{
    english: english_strings,
    german: german_strings
};

var current_language = null;

/**
 * buildGlobalStrings - sets all the header and footer strings in the DOM to the
 *  appropriate language
 * @param language - an object (dictionary) containing all the strings for the language
 */
function buildGlobalStrings(language) {
    // Header
    var list_items = $('.header>nav>ul>li>a');
    $(list_items[0]).text(language.header_welcome);
    $(list_items[1]).text(language.header_our_macaroons);
    $(list_items[2]).text(language.header_gifts_parties);
    $(list_items[3]).text(language.header_contact);

    // Footer
    var footer_divs = $('#f-top>div');
    $(footer_divs[2]).find('p').text(language.footer_follow_us);
    $('#f-bottom>p').text(language.footer_legal);
}

/**
 * getStoredLanguage - basically a getter function that retrieves the 'savedLanguage'
 *  key/value pair in the sessionStorage
 */
function getStoredLanguage()
{
    if (typeof (Storage) !== "undefined") {
        return (sessionStorage.getItem("savedLanguage"));
    }
    else {
        console.log("Local Storage not supported!");
    }
}
/**
 * setStoredLanguage - basically a setter function that sets the 'savedLanguage' key
 *  to the correct value
 * @param language - a string that's actually the dictionary key for the 'language' dictionary
 */
function setStoredLanguage(language) {
    if (typeof (Storage) !== "undefined") {
        return (sessionStorage.setItem("savedLanguage", language));
    }
    else {
        console.log("Local Storage not supported!");
    }
}

document.addEventListener("DOMContentLoaded", function () {
    current_language = language[getStoredLanguage()];

    // If we haven't stored a language preference in the session storage, then just use English
    if (current_language === undefined)
        current_language = language.english;

    buildGlobalStrings(current_language);
    var buildStringContent = window['buildStringContent_' + $('.midsection').attr('id')];
    if (typeof buildStringContent === 'function')
        buildStringContent(current_language);

    //buildStringContent[$('.midsection').attr('id')](current_language);   // Function from the other 'localize_xxx.js' file for the page.

    // Click-handler for the flag images in the header
    $('.lang-flags').on('click', 'img', function () {
        var clicked_language = $(this).attr('language');
        current_language = language[clicked_language];
        setStoredLanguage(clicked_language);

        buildGlobalStrings(current_language);
        if (typeof buildStringContent === 'function')
            buildStringContent(current_language);
        //buildStringContent[$('.midsection').attr('id')](current_language);
    });
});